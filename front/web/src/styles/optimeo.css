/*
  ══════════════════════════════════════════════
  OPTIMEO — Charte inspirée Bloomeo
  Couleurs extraites de la capture :
    Topbar : #CBE99B (vert lime très pâle)
    Sidebar bg : #FFFFFF, border : #E6EFE2
    Item actif : text #2E7D4F, bg #EBF5E1
    Card bg : #F3F9EC, border : #DDF0C8
    Accent vert : #4DA86B
    Accent teal : #3ABABA
    Accent violet : #9966CC
    Accent orange : #E8923A
    Text principal : #1B2E1B
    Text secondaire : #5E7A5E
    Text tertiary : #90A890
  ══════════════════════════════════════════════
*/
@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --sb-w: 218px;
  --top-h: 46px;
  --bg: #F6FAF3;
  --white: #FFFFFF;
  --border: #E4EDDF;
  --border2: #CFDEC8;
  --green: #4DA86B;
  --green-d: #2E7D4F;
  --green-l: #EBF5E1;
  --green-ll: #F3F9EC;
  --green-mid: #CBE99B;
  --teal: #3ABABA;
  --teal-l: #E5F6F6;
  --violet: #9966CC;
  --violet-l: #F2ECFA;
  --orange: #E8923A;
  --orange-l: #FDF2E8;
  --red: #D94F4F;
  --red-l: #FDEBEB;
  --blue: #3A82C8;
  --blue-l: #EBF3FC;
  --text: #1B2E1B;
  --text2: #4E6A4E;
  --text3: #8EA48E;
  --topbar: #CBE99B;
}

html { font-size: 13px; }
body {
  font-family: 'Plus Jakarta Sans', sans-serif;
  background: var(--bg);
  color: var(--text);
}

/* ══ CONTENT ══ */
.content { flex: 1; overflow-y: auto; padding: 18px 20px; }
.page { display: block; }
.page.active { display: block; }

/* ══ PAGE HEADER ══ */
.page-hd {
  display: flex; align-items: flex-start; justify-content: space-between;
  margin-bottom: 16px;
}
.page-hd h1 { font-size: 1.1rem; font-weight: 800; color: var(--text); letter-spacing: -.02em; }
.page-hd p { font-size: .72rem; color: var(--text2); margin-top: 2px; font-weight: 400; }
.page-hd-right { display: flex; gap: 7px; align-items: center; flex-shrink: 0; }

/* ══ BUTTONS ══ */
.btn {
  padding: 6px 14px; border-radius: 7px; border: 1px solid;
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-size: .73rem; font-weight: 700; cursor: pointer; transition: all .14s;
  display: inline-flex; align-items: center; gap: 5px;
}
.btn-green { background: var(--green); border-color: var(--green-d); color: white; }
.btn-green:hover { background: var(--green-d); }
.btn-teal { background: var(--teal); border-color: #2A9A9A; color: white; }
.btn-outline { background: white; border-color: var(--border2); color: var(--text2); }
.btn-outline:hover { border-color: var(--green); color: var(--green-d); }

/* ══ FILTERS ══ */
.filters {
  background: var(--white); border: 1px solid var(--border);
  border-radius: 10px; padding: 12px 14px;
  display: flex; gap: 10px; align-items: flex-end;
  flex-wrap: wrap; margin-bottom: 14px;
}
.fg { display: flex; flex-direction: column; gap: 3px; }
.fg-label {
  font-size: .6rem; font-weight: 700; text-transform: uppercase;
  letter-spacing: .1em; color: var(--text3);
}
.fg-sel, .fg-inp {
  border: 1px solid var(--border2); border-radius: 7px;
  padding: 6px 10px; font-family: 'Plus Jakarta Sans', sans-serif;
  font-size: .77rem; color: var(--text); background: var(--white);
  outline: none; min-width: 128px; appearance: none;
  transition: border-color .14s;
}
.fg-sel:focus, .fg-inp:focus { border-color: var(--green); box-shadow: 0 0 0 2px rgba(77,168,107,.1); }
.fg-sep { width: 1px; background: var(--border); align-self: stretch; margin: 0 4px; }
.fg-highlight {
  background: var(--green-ll); border: 1px solid var(--border);
  border-radius: 7px; padding: 6px 10px;
  font-size: .77rem; color: var(--text);
  display: flex; align-items: center; gap: 6px;
}

/* ══ KPI ROW ══ */
.kpi-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 14px; }
.kpi {
  background: var(--white); border: 1px solid var(--border);
  border-radius: 10px; padding: 13px 14px;
}
.kpi.green { background: var(--green-ll); border-color: #CBEAA8; }
.kpi.teal  { background: var(--teal-l);   border-color: #B5E4E4; }
.kpi.violet{ background: var(--violet-l); border-color: #D4C0F0; }
.kpi-label { font-size: .67rem; font-weight: 600; color: var(--text2); display: flex; align-items: center; gap: 5px; margin-bottom: 4px; }
.kpi-val   { font-size: 1.55rem; font-weight: 800; line-height: 1; letter-spacing: -.03em; }
.kpi-val.green  { color: var(--green-d); }
.kpi-val.teal   { color: #1F9595; }
.kpi-val.violet { color: var(--violet); }
.kpi-sub   { font-size: .62rem; color: var(--text3); margin-top: 3px; }
.kpi-delta { display: inline-flex; align-items: center; gap: 3px; margin-top: 6px; font-size: .68rem; font-weight: 700; padding: 2px 8px; border-radius: 20px; }
.kpi-delta.warn { background: var(--orange-l); color: var(--orange); }
.kpi-delta.good { background: var(--green-l); color: var(--green-d); }
.kpi-delta.bad  { background: var(--red-l); color: var(--red); }

/* ══ LAYOUT HELPERS ══ */
.g2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 14px; }
.g3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 14px; }
.g64 { display: grid; grid-template-columns: 1.72fr 1fr; gap: 12px; }

/* ══ CARD ══ */
.card {
  background: var(--white); border: 1px solid var(--border);
  border-radius: 10px; padding: 14px;
}
.card.green-bg { background: var(--green-ll); border-color: #CBEAA8; }
.card-h {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 12px;
}
.card-title {
  font-size: .8rem; font-weight: 700; color: var(--text);
  display: flex; align-items: center; gap: 6px;
}

/* ══ BADGE ══ */
.badge {
  display: inline-flex; align-items: center; gap: 3px;
  padding: 2px 8px; border-radius: 20px;
  font-size: .63rem; font-weight: 700;
}
.badge::before { content: '●'; font-size: .4rem; }
.bg-green  { background: var(--green-l); color: var(--green-d); }
.bg-teal   { background: var(--teal-l); color: #1F9595; }
.bg-violet { background: var(--violet-l); color: var(--violet); }
.bg-orange { background: var(--orange-l); color: var(--orange); }
.bg-gray   { background: #F0F0F0; color: #666; }
.bg-red    { background: var(--red-l); color: var(--red); }

/* ══ LEVERS GRID ══ */
.lev-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 9px; }
.lt {
  background: var(--green-ll); border: 1px solid #CBEAA8;
  border-radius: 8px; padding: 11px 12px;
}
.lt-h { display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 8px; }
.lt-name { font-size: .77rem; font-weight: 700; color: var(--text); }
.lt-var { font-size: .58rem; color: var(--text3); margin-top: 1px; font-style: italic; }
.badge-type { font-size: .55rem; font-weight: 700; padding: 2px 6px; border-radius: 20px; text-transform: uppercase; letter-spacing: .04em; flex-shrink: 0; margin-left: 5px; }
.bt-q  { background: var(--blue-l); color: var(--blue); }
.bt-ql { background: var(--violet-l); color: var(--violet); }
/* freq bars */
.fr { display: flex; align-items: center; gap: 6px; margin-bottom: 3px; }
.fr-lbl { font-size: .65rem; color: var(--text2); width: 105px; flex-shrink: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.fr-trk { flex: 1; height: 5px; background: #DCF0CC; border-radius: 3px; overflow: hidden; }
.fr-fil { height: 100%; border-radius: 3px; background: var(--green); transition: width .7s; }
.fr-fil.top { background: var(--green-d); }
.fr-pct { font-size: .62rem; color: var(--text3); width: 26px; text-align: right; font-weight: 700; flex-shrink: 0; }
/* quant */
.qv { font-size: 1.22rem; font-weight: 800; color: var(--green-d); line-height: 1; letter-spacing: -.02em; }
.qu { font-size: .6rem; color: var(--text3); margin-top: 1px; }
.qvs { font-size: .62rem; color: var(--text2); margin: 4px 0 3px; }
.qbar-row { display: flex; align-items: center; gap: 5px; margin-bottom: 2px; }
.qbar-lbl { font-size: .58rem; width: 52px; flex-shrink: 0; }
.qbar-trk { flex: 1; height: 4px; background: #DCF0CC; border-radius: 2px; overflow: hidden; }
.qbar-fil { height: 100%; border-radius: 2px; }

/* ══ TABLE ══ */
.tbl { width: 100%; border-collapse: collapse; }
.tbl th { font-size: .67rem; font-weight: 700; color: var(--text2); padding: 7px 9px; border-bottom: 1px solid var(--border); text-align: left; white-space: nowrap; }
.tbl td { font-size: .73rem; padding: 7px 9px; border-bottom: 1px solid #F2F7EE; vertical-align: middle; }
.tbl tr:hover td { background: #FAFDF7; }
.tbl tr:last-child td { border-bottom: none; }
.tbl-rank { font-size: .67rem; font-weight: 700; color: var(--text3); }
.tbl-name { font-size: .74rem; font-weight: 700; }
.tbl-sub  { font-size: .59rem; color: var(--text3); margin-top: 1px; }

/* ══ STEPS ══ */
.steps { display: flex; align-items: center; gap: 0; background: var(--white); border: 1px solid var(--border); border-radius: 8px; padding: 4px; }
.step { display: flex; align-items: center; gap: 5px; padding: 5px 11px; border-radius: 5px; font-size: .72rem; font-weight: 600; color: var(--text3); cursor: pointer; transition: all .15s; }
.step.active { background: var(--green); color: white; font-weight: 700; }
.step.done { color: var(--green-d); font-weight: 700; }
.step-n { width: 17px; height: 17px; border-radius: 50%; background: var(--border); display: flex; align-items: center; justify-content: center; font-size: .6rem; font-weight: 800; flex-shrink: 0; }
.step.active .step-n { background: rgba(255,255,255,.3); color: white; }
.step.done .step-n { background: var(--green-d); color: white; }
.step-sep { color: var(--border2); font-size: .75rem; padding: 0 2px; }

/* ══ ITK LAYOUT ══ */
.itk-layout { display: grid; grid-template-columns: 1fr 275px; gap: 14px; }
.fsec { margin-bottom: 14px; }
.fsec-title {
  font-size: .68rem; font-weight: 800; text-transform: uppercase; letter-spacing: .1em;
  color: var(--text2); border-bottom: 2px solid var(--green-l); padding-bottom: 6px;
  margin-bottom: 10px; display: flex; align-items: center; gap: 6px;
}
.fgrid { display: grid; grid-template-columns: 1fr 1fr; gap: 9px; }
.fgrid.t3 { grid-template-columns: 1fr 1fr 1fr; }
.fld { display: flex; flex-direction: column; gap: 3px; }
.fld.full { grid-column: span 2; }
.flbl {
  font-size: .67rem; font-weight: 600; color: var(--text2);
  display: flex; align-items: center; gap: 5px; flex-wrap: wrap;
}
.fref {
  font-size: .57rem; background: var(--green-l); color: var(--green-d);
  padding: 1px 5px; border-radius: 3px; font-weight: 700;
}
.fsel, .finp {
  border: 1px solid var(--border2); border-radius: 7px; padding: 7px 9px;
  font-family: 'Plus Jakarta Sans', sans-serif; font-size: .76rem;
  color: var(--text); background: var(--white); outline: none;
  appearance: none; -webkit-appearance: none;
  transition: border-color .14s, box-shadow .14s;
}
.fsel:focus, .finp:focus { border-color: var(--green); box-shadow: 0 0 0 2px rgba(77,168,107,.1); }
.chips { display: flex; gap: 5px; flex-wrap: wrap; }
.chip {
  padding: 5px 10px; border-radius: 6px; border: 1px solid var(--border2);
  font-size: .71rem; font-weight: 600; cursor: pointer;
  background: var(--white); color: var(--text2); transition: all .13s;
}
.chip:hover { border-color: var(--green); color: var(--green-d); }
.chip.on { background: var(--green); border-color: var(--green-d); color: white; }
.slider-w { display: flex; flex-direction: column; gap: 2px; }
.slider-top { display: flex; justify-content: space-between; align-items: baseline; }
.slider-top .cap { font-size: .6rem; color: var(--text3); }
.slider-val { font-size: .78rem; font-weight: 800; color: var(--green-d); }
.fslider {
  width: 100%; height: 5px; border-radius: 3px; background: var(--border2);
  outline: none; cursor: pointer; -webkit-appearance: none; appearance: none;
}
.fslider::-webkit-slider-thumb {
  -webkit-appearance: none; width: 15px; height: 15px; border-radius: 50%;
  background: var(--green); cursor: pointer; border: 2px solid white;
  box-shadow: 0 1px 4px rgba(0,0,0,.18);
}
.fslider::-moz-range-thumb {
  width: 15px; height: 15px; border-radius: 50%;
  background: var(--green); cursor: pointer; border: 2px solid white;
  box-shadow: 0 1px 4px rgba(0,0,0,.18);
}

/* ══ IFT RESULT SIDEBAR ══ */
.ift-card {
  background: var(--green-ll); border: 1px solid #C0E8A0;
  border-radius: 10px; padding: 14px; text-align: center; margin-bottom: 11px;
  position: relative; overflow: hidden;
}
.ift-card::before {
  content: '';
  position: absolute; top: 0; left: 0; right: 0; height: 3px;
  background: linear-gradient(90deg, var(--green), var(--teal));
}
.ift-card-lbl { font-size: .62rem; font-weight: 700; color: var(--text2); text-transform: uppercase; letter-spacing: .1em; margin-bottom: 5px; }
.ift-card-val { font-size: 3rem; font-weight: 800; line-height: 1; letter-spacing: -.04em; transition: color .4s; }
.ift-card-unit { font-size: .88rem; font-weight: 500; color: var(--text2); margin-left: 2px; }
.ift-card-sub { font-size: .62rem; color: var(--text2); margin-top: 4px; }
.gauge-wrap { margin: 9px 0 3px; }
.gauge-trk { height: 8px; background: #D0EAB8; border-radius: 4px; overflow: hidden; position: relative; }
.gauge-fil { height: 100%; border-radius: 4px; transition: width .5s ease, background .4s; }
.gauge-tks { display: flex; justify-content: space-between; margin-top: 3px; }
.gauge-tks span { font-size: .56rem; color: var(--text3); }
.cr { display: flex; justify-content: space-between; align-items: center; padding: 5px 0; border-top: 1px solid var(--border); font-size: .71rem; }
.cr .k { color: var(--text2); }
.cr .v { font-weight: 800; font-size: .73rem; }
.v-good  { color: var(--green-d); }
.v-warn  { color: var(--orange); }
.v-bad   { color: var(--red); }
.v-neu   { color: var(--text3); }
.v-teal  { color: var(--teal); }

/* ══ SIM LAYOUT ══ */
.sim-layout { display: grid; grid-template-columns: 1fr 340px; gap: 14px; }

/* summary header */
.sim-summary {
  background: var(--white); border: 1px solid var(--border); border-radius: 10px;
  padding: 12px 16px; margin-bottom: 14px;
  display: flex; align-items: center; justify-content: space-between; gap: 16px;
}
.ss-group { text-align: center; }
.ss-lbl { font-size: .62rem; font-weight: 600; color: var(--text2); margin-bottom: 3px; }
.ss-val { font-size: 1.45rem; font-weight: 800; letter-spacing: -.03em; line-height: 1; }
.ss-val.current { color: var(--orange); }
.ss-val.simulated { color: var(--teal); }
.ss-val.gain { color: var(--green-d); }
.ss-arrow { font-size: 1.2rem; color: var(--text3); }
.ss-sep { width: 1px; background: var(--border); align-self: stretch; margin: 0 8px; }
.ss-ref { display: flex; gap: 12px; }
.ss-ref-item { text-align: center; }
.ss-ref-lbl { font-size: .58rem; color: var(--text3); font-weight: 500; }
.ss-ref-val { font-size: .85rem; font-weight: 800; color: var(--text2); }

/* lever row */
.lev-row {
  background: var(--white); border: 1px solid var(--border);
  border-radius: 9px; padding: 12px 14px; margin-bottom: 8px;
  display: grid; grid-template-columns: 1fr auto;
  gap: 12px; align-items: start;
  cursor: default; transition: border-color .15s, box-shadow .15s;
}
.lev-row:hover { border-color: var(--green); }
.lev-row.picked { border-color: var(--green); background: var(--green-ll); box-shadow: 0 2px 10px rgba(77,168,107,.1); }
.lev-name { font-size: .8rem; font-weight: 800; color: var(--text); margin-bottom: 3px; display: flex; align-items: center; gap: 6px; }
.lev-desc { font-size: .68rem; color: var(--text2); line-height: 1.45; margin-bottom: 8px; }
.lev-opts { display: flex; gap: 5px; flex-wrap: wrap; }
.lo {
  padding: 5px 10px; border-radius: 6px; border: 1px solid var(--border2);
  font-size: .69rem; font-weight: 600; cursor: pointer;
  background: var(--white); color: var(--text2); transition: all .12s; line-height: 1.3;
  text-align: center;
}
.lo:hover { border-color: var(--green); color: var(--green-d); }
.lo.curr { border-color: var(--orange); color: var(--orange); background: var(--orange-l); }
.lo.pick { border-color: var(--green); color: var(--green-d); background: var(--green-l); font-weight: 700; }
.lo.ref  { border-style: dashed; }
.lev-impact { text-align: right; flex-shrink: 0; }
.lev-impact-val { font-size: .82rem; font-weight: 800; }
.lev-impact-val.good { color: var(--green-d); }
.lev-impact-val.neu  { color: var(--text3); }
.lev-impact-sub { font-size: .58rem; color: var(--text3); margin-top: 2px; }

/* waterfall */
.wf-row { display: flex; align-items: center; gap: 8px; margin-bottom: 5px; }
.wf-lbl { font-size: .69rem; color: var(--text2); width: 112px; flex-shrink: 0; }
.wf-lbl.str { font-weight: 800; color: var(--text); }
.wf-area { flex: 1; height: 15px; background: var(--green-ll); border-radius: 4px; overflow: hidden; position: relative; }
.wf-bar { position: absolute; top: 0; left: 0; height: 100%; border-radius: 4px; transition: width .5s; }
.wf-num { font-size: .67rem; font-weight: 800; width: 38px; text-align: right; flex-shrink: 0; }
.wf-num.good { color: var(--green-d); }
.wf-num.warn { color: var(--orange); }

/* total impact */
.total-impact {
  background: var(--green-d); border-radius: 9px; padding: 13px 14px;
  display: flex; justify-content: space-between; align-items: center; margin-top: 12px;
}
.ti-label { color: rgba(255,255,255,.8); font-size: .74rem; font-weight: 600; }
.ti-val { font-size: 1.7rem; font-weight: 800; color: white; letter-spacing: -.03em; }
.ti-val small { font-size: .75rem; opacity: .7; font-weight: 500; }

/* multi-indicators */
.multi-ind { background: var(--green-ll); border: 1px solid #CBEAA8; border-radius: 9px; padding: 12px; margin-top: 10px; }
.mi-title { font-size: .68rem; font-weight: 800; color: var(--text2); text-transform: uppercase; letter-spacing: .1em; margin-bottom: 8px; }
.mi-row { display: flex; align-items: center; gap: 8px; padding: 5px 0; border-top: 1px solid var(--border); }
.mi-ico { font-size: .85rem; width: 18px; text-align: center; }
.mi-key { flex: 1; font-size: .71rem; color: var(--text2); font-weight: 500; }
.mi-curr { font-size: .69rem; color: var(--text3); text-decoration: line-through; }
.mi-new  { font-size: .72rem; font-weight: 800; color: var(--green-d); margin-left: 5px; }

/* tag pill */
.tag { display: inline-block; padding: 3px 9px; border-radius: 20px; font-size: .62rem; font-weight: 700; }
.tag-green  { background: var(--green-l); color: var(--green-d); border: 1px solid #B8DDA0; }
.tag-teal   { background: var(--teal-l); color: #1F9595; border: 1px solid #A8D8D8; }
.tag-orange { background: var(--orange-l); color: var(--orange); border: 1px solid #F4C899; }
.tag-violet { background: var(--violet-l); color: var(--violet); border: 1px solid #C8B0E8; }
.tag-red    { background: var(--red-l); color: var(--red); border: 1px solid #F0B8B8; }

/* scroll */
::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--text3); }

/* animations */
@keyframes fadeUp { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: none; } }
.page.active > * { animation: fadeUp .25s ease both; }

/* ══ CONTENT WRAPPER FOR REACT ══ */
.optimeo-content {
  background: var(--bg);
  font-family: 'Plus Jakarta Sans', sans-serif;
  color: var(--text);
  padding: 18px 20px;
  overflow-y: auto;
  flex: 1;
}
